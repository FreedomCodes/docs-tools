{%- extends "layout.html" -%}

{%- block htmltitle %}
  {%- if not embedded and docstitle %}
    {%- set titlesuffix = " &mdash; "|safe + docstitle|e + " " + version|e %}
  {%- else %}
    {%- set titlesuffix = "" %}
  {%- endif -%}

  <title>{{ title|striptags|e }}{{ titlesuffix }}</title>
{%- endblock -%}

{%- block metadescription %}
  <meta name="description" content="MongoDB Manual {{version}} {{title|striptags|e}}"/>
{%- endblock -%}

{%- block canonicalref %}
  {%- if theme_branch == 'master' %}
    {%- if pagename == 'index' %}
      <link rel="canonical" href="http://docs.mongodb.com/{{theme_project}}/" />
    {%- else %}
      <link rel="canonical" href="http://docs.mongodb.com/{{theme_project}}/{{pagename}}" />
    {%- endif -%}
  {%- endif -%}
{%- endblock -%}

{%- block alertbar -%}
    {%- if theme_active_branches and version not in theme_active_branches %}
        <div class="alert alert-info">
           <span class="alert-message">This version of the manual is no longer supported.</span>
        </div>
    {%- elif theme_eol == "true" %}
        <div class="alert alert-info">
           <span class="alert-message">{{theme_eol_msg}}</span>
        </div>
    {%- endif %}

{%- endblock -%}

{%- block righttoc %} {% endblock %}
{%- block adblockheader %}
    {%- include "adblock-header.html" %}
{%- endblock -%}

{%- block adblock %}
    {%- include "adblock.html" %}
{%- endblock -%}

{%- block topnav %}
  {%- block subnav %} {% endblock %}

  {%- block searchbox %}
      <div class="search-db narrow pull-right"><gcse:searchbox-only resultsUrl="https://docs.mongodb.com/{{theme_project}}/search/" queryParameterName="query"></gcse:searchbox-only></div>
  {% endblock %}
{% endblock %}

{%- block sitesearch %}
  {%- if builder != 'singlehtml' %}
      <script>
        (function() {
          var cx = '017213726194841070573:WMX6838984';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
          gcse.onload = gcse.onreadystatechange = function() {
           $(function() {
             // hack to set a placeholder in google's custom search input
             var pollInput = window.setInterval(function() {
               var $input = $('.gsc-input input.gsc-input'),
                   $div = $('.search-db');
               if ($input.length) {
                 $input.on('focus', function(e) { $div.addClass('wide').removeClass('narrow'); });
                 $input.on('blur', function(e) {
                   if (!$input.val().length) { $div.addClass('narrow').removeClass('wide'); }
                 });
                 $input.attr('placeholder', "Search docs.mongodb.com/manual");
                 window.clearInterval(pollInput);
               }
             }, 10);
           });
          };

          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
      </script>
<gcse:searchbox-only></gcse:searchbox-only>
  {%- endif %}
{%- endblock -%}

{%- block pdflink %}{%- endblock %}

{%- block epublink %}<li><a href="{{ theme_epubpath }}" target="_blank" rel="nofollow">EPUB</a></li>{%- endblock %}

{%- block langauge_selector %}{%- endblock -%}
